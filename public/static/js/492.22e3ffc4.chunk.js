"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[492],{3492:function(e,i,a){a.r(i),a.d(i,{default:function(){return p}});var n=a(5861),t=a(885),r=a(7757),d=a.n(r),s=a(2791),l=a(6030);var o=a.p+"static/media/profile.40801fc960f17e5eebb27d9b4ae5b5ef.svg";var c=a.p+"static/media/edit.1307a905ff60e2b44a9d010022193192.svg",u=a(8155);var v=a(184);function f(e){var i,a,n,r,d=e.user,l=e.updateProfile,o=e.updateUserAvatar,c=e.setIsEdit,u=(0,s.useState)(d.surname),f=(0,t.Z)(u,2),h=f[0],p=f[1],x=(0,s.useState)(d.name),j=(0,t.Z)(x,2),g=j[0],m=j[1],b=(0,s.useState)(d.phone),_=(0,t.Z)(b,2),y=_[0],k=_[1],N=(0,s.useState)(d.email),C=(0,t.Z)(N,2),S=C[0],Z=C[1],w=(0,s.useState)((null===d||void 0===d||null===(i=d.data)||void 0===i?void 0:i.birthday)&&d.data.birthday),E=(0,t.Z)(w,2),U=E[0],F=E[1],I=(0,s.useState)((null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.gender)&&d.data.gender),R=(0,t.Z)(I,2),A=R[0],D=R[1],L=(0,s.useState)((null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.city)&&d.data.city),P=(0,t.Z)(L,2),z=P[0],O=(P[1],(0,s.useState)((null===d||void 0===d||null===(r=d.data)||void 0===r?void 0:r.address)&&d.data.address)),T=(0,t.Z)(O,2),V=T[0],q=T[1],B=(0,s.useRef)();(0,s.useEffect)((function(){D(B.current.value)}),[]);return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"editprofile-block__grid grid-editprofile",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),(0,v.jsx)("input",{id:"user__surname",value:h,onChange:function(e){return p(e.target.value)},type:"text"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0418\u043c\u044f"}),(0,v.jsx)("input",{id:"user__name",value:g,onChange:function(e){return m(e.target.value)},type:"text"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,v.jsx)("input",{value:y,placeholder:(null===d||void 0===d?void 0:d.phone)&&d.phone,onChange:function(e){return k(e.target.value)},type:"text"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"E-mail"}),(0,v.jsx)("input",{value:S,onChange:function(e){return Z(e.target.value)},type:"text",disabled:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"}),(0,v.jsx)("input",{value:U,onChange:function(e){return F(e.target.value)},type:"date"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u041f\u043e\u043b"}),(0,v.jsxs)("select",{ref:B,id:"gender",name:"gender",value:A,onChange:function(e){return D(e.target.value)},children:[(0,v.jsx)("option",{value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),(0,v.jsx)("option",{value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]})]}),(0,v.jsxs)("div",{className:"grid-editprofile__address",children:[(0,v.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441"}),(0,v.jsx)("input",{value:V,onChange:function(e){return q(e.target.value)},type:"text"})]})]}),(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,v.jsx)("button",{className:"editprofile-block__save-edit",onClick:function(){return l(S,h,g,y,{birthday:U,gender:A,city:z,address:V}),void o()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,v.jsx)("button",{className:"editprofile-block__save-edit",onClick:function(){return c(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}function h(){var e,i,a,n=(0,l.v9)((function(e){return e.user})),t=n.currentUser,r=n.isLoading;return(0,v.jsx)("div",{children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"editprofile-block__username",children:(0,v.jsxs)("div",{children:[t.surname," ",t.name]})}),(0,v.jsxs)("div",{className:"editprofile-block__grid grid-editprofile",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,v.jsx)("div",{className:"grid-editprofile__loadinfo",children:t.phone})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"E-mail"}),(0,v.jsx)("div",{className:"grid-editprofile__loadinfo",children:t.email})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"}),(0,v.jsx)("div",{className:"grid-editprofile__loadinfo",children:(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.birthday)&&t.data.birthday})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"\u041f\u043e\u043b"}),(0,v.jsx)("div",{className:"grid-editprofile__loadinfo",children:(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.gender)&&t.data.gender})]}),(0,v.jsxs)("div",{className:"grid-editprofile__address",children:[(0,v.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441"}),(0,v.jsx)("div",{className:"grid-editprofile__loadinfo",children:(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.address)&&t.data.address})]})]})]}):(0,v.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})})}function p(){var e=(0,s.useState)(!1),i=(0,t.Z)(e,2),a=i[0],r=i[1],p=(0,s.useState)(null),x=(0,t.Z)(p,2),j=x[0],g=x[1],m=(0,l.v9)((function(e){return e.user.currentUser})),b=(0,s.useRef)(),_=(0,l.I0)();(0,s.useEffect)((function(){document.body.scrollIntoView({behavior:"smooth"})}),[]);var y=function(){var e=(0,n.Z)(d().mark((function e(i,a,n,t,s){var l,o,c,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.birthday,o=s.gender,c=s.city,v=s.address,r(!1),e.next=4,_((0,u.uz)(i,a,n,t,{birthday:l,gender:o,city:c,address:v}));case 4:case"end":return e.stop()}}),e)})));return function(i,a,n,t,r){return e.apply(this,arguments)}}();return(0,v.jsxs)("section",{className:"edit-profile",children:[(0,v.jsxs)("div",{className:"edit-profile__block-avatar avatar-block",children:[(0,v.jsx)("label",{id:"avatar-label",htmlFor:"avatar",children:(0,v.jsx)("img",{ref:b,src:m.avatar?m.avatar:o,alt:"avatar"})}),(0,v.jsx)("input",{onChange:function(e){if(console.log(e.target.files[0]),e.target.files[0]){var i=new FileReader;i.addEventListener("load",(function(){b.current.src=i.result}),!1),i.readAsDataURL(e.target.files[0]);var a=new FormData;a.append("fileData",e.target.files[0]),console.log(a),fetch("/api/files",{method:"POST",body:a}).then((function(e){return e.text()})).then((function(e){g("/upload/"+e)})).catch((function(e){return console.log(e)}))}},type:"file",id:"avatar",disabled:!a})]}),(0,v.jsx)("img",{className:"editprofile-block__image",src:c,alt:"edit",onClick:function(){return r(!0)}}),(0,v.jsx)("div",{className:"edit-profile__block-profile editprofile-block",children:a?(0,v.jsx)(f,{setIsEdit:r,user:m,updateProfile:y,updateUserAvatar:function(){console.log("start fetch"),j&&_((0,u.ip)(m.email,j))}}):(0,v.jsx)(h,{})})]})}}}]);
//# sourceMappingURL=492.22e3ffc4.chunk.js.map